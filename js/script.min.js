var popupWriteLink=document.querySelector(".main-contacts__btn"),popupWrite=document.querySelector(".popup-write-us"),popupWriteClose=document.querySelector(".popup-write-us__close"),userName=popupWrite.querySelector("input[name=user-name]"),userEmail=popupWrite.querySelector("input[name=user-email]"),userTextArea=popupWrite.querySelector("textarea[name=user-message]"),popupWriteForm=popupWrite.querySelector(".popup-form"),popupMapLink=document.querySelector(".main-contacts__map"),popupMap=document.querySelector(".popup-map"),popupMapClose=document.querySelector(".popup-map__close");let isStorageSupport=!0,storageUserName="",storageUserEmail="";try{storageUserName=localStorage.getItem("username"),storageUserEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}popupWriteLink.addEventListener("click",function(e){e.preventDefault(),popupWrite.classList.add("popup-write-us--active"),storageUserName?(userName.value=storageUserName,userEmail.focus()):userName.focus(),storageUserEmail?(userEmail.value=storageUserEmail,userTextArea.focus()):userEmail.focus()}),popupWriteClose.addEventListener("click",function(e){e.preventDefault(),popupWrite.classList.remove("popup-write-us--active")}),popupWriteForm.addEventListener("submit",function(e){userName.value&&userEmail.value?isStorageSupport&&(localStorage.setItem("username",userName.value),localStorage.setItem("email",userEmail.value)):(e.preventDefault(),popupWrite.classList.add("popup-write-us--error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupWrite.classList.contains("popup-write-us--active")&&(popupWrite.classList.remove("popup-write-us--active"),popupWrite.classList.remove("popup-write-us--error")))}),popupMapLink.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.add("popup-map--active")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popupMap.classList.contains("popup-map--active")&&popupMap.classList.remove("popup-map--active"))}),popupMapClose.addEventListener("click",function(e){e.preventDefault(),popupMap.classList.remove("popup-map--active")});